# Noir → Solana ZK Proof Verification (Sunspot)

> **Note**
> The `target/` folder is committed **only for demo purposes**.
> In a real setup, proof artifacts should be generated locally or in CI and never committed.

This repository demonstrates how to **generate a Noir ZK proof and verify it on the Solana blockchain using Sunspot**.

Sunspot enables verifying **Noir-based ZK proofs inside Solana programs**, bridging Noir circuits and on-chain verification.

---

## Project Structure (Relevant Parts)

```
simple_sum/
├── src/
│   └── main.nr              # Noir circuit
├── target/                  # Generated artifacts (demo only)
│   ├── simple_sum.proof
│   ├── simple_sum.pw
│   ├── simple_sum.vk
│   └── ...
├── Nargo.toml
├── Prover.toml
```

---

## Prerequisites

* Rust
* Noir (`nargo`)
* Sunspot

---

## Install Sunspot

Follow the official installation instructions:

[https://github.com/reilabs/sunspot](https://github.com/reilabs/sunspot)

Verify installation:

```bash
sunspot --version
nargo --version
```

---

## Create a Noir Circuit

Create a new Noir project:

```bash
nargo new simple_sum
```

This generates:

* `src/main.nr`
* `Nargo.toml`

Implement your circuit logic inside `src/main.nr`.

---

## Generate `Prover.toml`

Run:

```bash
nargo check
```

This creates a `Prover.toml` file.

Populate `Prover.toml` with **valid inputs** that satisfy your circuit constraints.

---

## Compile and Generate Proof Artifacts

Execute the circuit:

```bash
nargo execute
```

This step:

* Compiles the Noir circuit to **ACIR**
* Generates the **witness**

---

## Verifying Noir Proofs on Solana (Sunspot)

Sunspot allows Noir proofs to be verified **inside Solana programs**.
All commands below are executed **inside the Noir project directory** (`simple_sum/`).

---


First, Compile a Noir ACIR file into a CCS file

```bash
sunspot compile target/simple_sum.json
```

What this does:

* Loads the ACIR file generated by `nargo execute`
* Parses the circuit inputs and constraints
* Produces a constraint system (`.ccs`)

Output:

* `target/simple_sum.ccs`

---

## Step 2: Generate Proving and Verifying Keys

Next, generate the Groth16 proving and verifying keys.

```bash
sunspot setup target/simple_sum.ccs
```

What this does:

* Consumes the compiled constraint system
* Generates Groth16 keys for the circuit

Outputs:

* `target/simple_sum.pk` — proving key
* `target/simple_sum.vk` — verifying key

---

Generate a Groth16 proof using the witness produced by Noir.

```bash
sunspot prove \
  target/simple_sum.json \
  target/simple_sum.gz \
  target/simple_sum.ccs \
  target/simple_sum.pk
```

What this does:

* Loads the constraint system
* Loads the witness generated by `nargo execute`
* Generates a Groth16 proof.

Outputs:

* `target/simple_sum.proof` — proof bytes
* `target/simple_sum.pw` — public witness

---

Before sending anything on-chain, verify the proof locally.

```bash
sunspot verify \
  target/simple_sum.vk \
  target/simple_sum.proof \
  target/simple_sum.pw
```

If successful, you should see:

```
Verification successful!
```

This confirms:

* The proof is valid
* The public witness matches the circuit constraints
* The verifying key is correct

---

## Generated Artifacts Summary

| File               | Description                           |
| ------------------ | ------------------------------------- |
| `simple_sum.ccs`   | Constraint system generated from ACIR |
| `simple_sum.pk`    | Groth16 proving key                   |
| `simple_sum.vk`    | Groth16 verifying key                 |
| `simple_sum.proof` | Groth16 proof                         |
| `simple_sum.pw`    | Public witness                        |
| `simple_sum.gz`    | Witness data produced by Noir         |

> **Note**
> The `target/` directory is committed **only for demo purposes**.
> In production or CI setups, these artifacts should be generated locally and never checked into version control.

---

## Relation to Solana Verification

* The proof (`.proof`) and public witness (`.pw`) are passed as instruction data
* Verification is performed **inside the Solana program**


---

## Client (Optional)

A client script exists to submit the generated proof to Solana for verification.

If you want to run it yourself:

set up a deployer.json file with a keypair
replaice the program ID with your own verifier contract ID which returned after deploying the verifier contract on Solana

```bash
cd client
npm install
npm run start
```

The client:

* Reads proof artifacts from `simple_sum/target`
* Submits a verification transaction

---

## Important Notes

* `target/` is committed **only for demonstration**
* Do **not** commit proof artifacts in production
* Proof sizes are currently small enough to fit in a single Solana instruction
* Larger circuits will require instruction chunking or alternative verification flows

---

## References

* Sunspot
  [https://github.com/reilabs/sunspot](https://github.com/reilabs/sunspot)

* Solana Noir Examples
  [https://github.com/solana-foundation/noir-examples](https://github.com/solana-foundation/noir-examples)

